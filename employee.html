<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <title>Panel Pracownika</title>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
</head>
<body>
  <h2>Panel Pracownika</h2>
  <p id="loginDisplay"></p>
  <label>Data: <input type="date" id="data"></label><br>
  <label>Godzina przyjścia: <input type="time" id="start"></label><br>
  <label>Godzina wyjścia: <input type="time" id="end"></label><br>
  <button onclick="zapisz()">Zapisz</button>
  <ul id="lista"></ul>

  <script>
    const firebaseConfig = { /* ...takie samo jak w index.html */ };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    const login = localStorage.getItem("login");
    document.getElementById("loginDisplay").innerText = "Zalogowany jako: " + login;

    async function zapisz() {
      const data = document.getElementById("data").value;
      const start = document.getElementById("start").value;
      const end = document.getElementById("end").value;
      if (!data || !start || !end) return alert("Uzupełnij wszystkie pola!");
      await db.collection("godziny").add({ login, data, start, end });
      alert("Zapisano");
      wczytaj();
    }

    async function wczytaj() {
      const snap = await db.collection("godziny").where("login", "==", login).get();
      const lista = document.getElementById("lista");
      lista.innerHTML = "";
      snap.forEach(doc => {
        const g = doc.data();
        lista.innerHTML += `<li>${g.data}: ${g.start} - ${g.end}</li>`;
      });
    }
    wczytaj();
  </script>
</body>
</html>
